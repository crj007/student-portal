<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Student Results</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="result-bg">
  <div class="result-card">
     <img src="logo.jpg" alt="School Logo" class="school-logo" />
    <h1 class="school-name">Cambridge International School Guwahati</h1>
    <h2>ðŸ“„ Student Details</h2>
    <p><strong>Roll No:</strong> <span id="roll"></span></p>
    <p><strong>Name:</strong> <span id="name"></span></p>
    <p><strong>Class:</strong> <span id="cls"></span></p>

    <h3>ðŸ“Š Marks Scored:</h3>
    <ul id="marksList" class="marks-list"></ul>
  </div>

  <script>
  const username = sessionStorage.getItem("username")?.toLowerCase();
  const roll = sessionStorage.getItem("roll");
  const classSelected = sessionStorage.getItem("class");
  const board = sessionStorage.getItem("board");

  if (!username || !roll || !classSelected || !board) {
    alert("Unauthorized access!");
    window.location.href = "index.html";
    return;
  }

 fetch('student_data.json')
  .then(res => res.json())
  .then(data => {
    if (!data[board] || !data[board][classSelected]) {
      document.querySelector('.result-card').innerHTML = "<h3>No data found for selected board/class.</h3>";
      return;
    }

    const students = data[board][classSelected];
    const student = students.find(s =>
       s.username.toLowerCase() === username && s.roll.toString() === roll.toString()
    );

    if (student) {
      document.getElementById("roll").textContent = student.roll;
      document.getElementById("name").textContent = student.fullname;
      document.getElementById("cls").textContent = `${board} - ${classSelected === 'AS' || classSelected === 'A' ? 'Level' : 'Class'} ${classSelected}`;

      const ul = document.getElementById("marksList");
      for (let subject in student.marks) {
        let li = document.createElement("li");
        li.textContent = `${subject}: ${student.marks[subject]}`;
        ul.appendChild(li);
      }
    } else {
      document.querySelector('.result-card').innerHTML = "<h3>No record found for this student.</h3>";
    }
    console.log("Looking for:", username, roll, board, classSelected);
    console.log("Student list:", students);

  });
</script>

</body>
</html>
